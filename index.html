<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ushaka Autocomplete</title>
    <style>
        /* Reset default margin and padding */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            color: #ccc;
            background-color: #121212;
/*            background-color: #202124; /* Set a background color */*/

        }

        /* Style for the body to center everything */
        body {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh;
            font-family: Arial, sans-serif;
/*            background-color: #cfd7db; /* Set a background color */

            color: white;
        }

        /* Style for the autocomplete container */
        .autocomplete-container {
            text-align: center;
            width: 90%;
/*            max-width: 400px;*/
        }

        /* Style for the autocomplete dropdown */
        .autocomplete {
            position: relative;
            width: 100%; /* Full width */
            margin-bottom: 20px;
        }

        #searchInput {
            padding: 10px;
            width: 100%;
            border: 1px solid #ccc;
            border-radius: 15px;
            font-size: 16px;
            text-align: center;
            background-color: transparent;
        }

        h1 {
            margin-bottom: 40px;

        }

        h2 {
            margin-bottom: 20px;
        }

        #autocompleteDropdown {
            position: absolute;
            width: 100%;
            border: 1px solid #ccc;
            border-radius: 15px;
            background-color: #f1f1f1;
            min-width: 200px;
            box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
            z-index: 1;
            display: none;
        }

        .autocomplete-item {
            padding: 12px;
            cursor: pointer;
        }

        .autocomplete-item:hover {
            background-color: #ddd;
        }

        .selected {
            background-color: #0074cc;
            color: white;
        }

        /* Style for displaying arbitrary data */
/*        #dataDisplay {
            display: none;
            padding: 30px;
            margin-top: 10px;
            width: 90%;
            text-align: center; 
        }*/

        /* Style for displaying arbitrary data */
        #dataDisplay {
            display: none;
            padding: 30px;
            margin-top: 10px;
            width: 90%;

            margin-left: auto; /* Push it to the left margin */
            margin-right: auto; /* Center horizontally */
            text-align: left; /* Align content to the left when displaying data */
        }

        #dataDisplay.show {
            display: block; /* Show the section when there's data to display */
        }
    </style>
</head>
<body>
    <h1>Cheat sheet</h1>
    
    <div class="autocomplete-container">
        <div class="autocomplete">
            <input type="text" id="searchInput" placeholder="Search for species...">
            <div id="autocompleteDropdown"></div>
        </div>
    </div>

    <div id="dataDisplay">
        <h2 id="selectedTerm">Term</h2>
        <p id="dataContent"></p>
        <p><span id="lifespan">Lifespan: </span></p>
        <p><span id="habitat">Habitat: </span></p>
        <p><span id="classification">>Classification: </span></p>
    </div>

    <script>
        // Sample JSON data with additional fields
        const jsonData = [
            { 
                term: "Lion", 
                definition: "The lion is a large carnivorous mammal.",
                lifespan: "10-14 years in the wild",
                habitat: "Grasslands and savannas",
                classification: "Mammalia" 
            },
            { 
                term: "Elephant", 
                definition: "The elephant is the largest land animal.",
                lifespan: "60-70 years",
                habitat: "Forests and grasslands",
                classification: "Mammalia" 
            },
            { term: "Biome", definition: "Distinct biological communities that have formed in response to a shared physical climate." },
            { term: "Symbiosis", definition: "Is the close and often long-term interaction between two or more different biological species. Major types of broad geographic regions are biomes." },
            { term: "endangered", definition: "There isn't much of it left" },
            // ... (other data items)
        ];

        const input = document.getElementById("searchInput");
        const dropdown = document.getElementById("autocompleteDropdown");
        const dataDisplay = document.getElementById("dataDisplay");
        const dataContent = document.getElementById("dataContent");
        const selectedTerm = document.getElementById("selectedTerm");
        const lifespan = document.getElementById("lifespan");
        const habitat = document.getElementById("habitat");
        const classification = document.getElementById("classification");
        let selectedIndex = -1;

        input.addEventListener("input", autocomplete);

        input.addEventListener("keydown", function(e) {
            if (e.key === "ArrowDown") {
                e.preventDefault(); // Prevent scrolling of the page
                moveSelection(1);
            } else if (e.key === "ArrowUp") {
                e.preventDefault(); // Prevent scrolling of the page
                moveSelection(-1);
            } else if (e.key === "Enter" && selectedIndex !== -1) {
                e.preventDefault(); // Prevent form submission
                const term = dropdown.children[selectedIndex].textContent;
                input.value = term;
                dropdown.style.display = "none";
                selectedTerm.textContent = term; // Update the selected term
                displayData(getDataForTerm(term));
            }
        });

        function getDataForTerm(term) {
            return jsonData.find(item => item.term === term);
        }

        function moveSelection(step) {
            const items = Array.from(dropdown.children);

            if (items.length === 0) return;

            if (selectedIndex === -1 && step === -1) {
                selectedIndex = items.length - 1;
            } else {
                selectedIndex = (selectedIndex + step + items.length) % items.length;
            }

            updateSelected();
        }

        function updateSelected() {
            const items = Array.from(dropdown.children);

            items.forEach((item, index) => {
                if (index === selectedIndex) {
                    item.classList.add("selected");
                } else {
                    item.classList.remove("selected");
                }
            });
        }

        function autocomplete() {
            const query = input.value.toLowerCase().trim();
            dropdown.innerHTML = "";

            if (query.length === 0) {
                dropdown.style.display = "none";
                // dataDisplay.style.display = "none";
                dataDisplay.classList.remove("show"); // Remove the 'show' class to hide the section
                return;
            }

            const suggestions = jsonData.filter(item => item.term.toLowerCase().includes(query));

            if (suggestions.length === 0) {
                dropdown.style.display = "none";
                dataDisplay.style.display = "none";
                return;
            }

            suggestions.forEach((suggestion, index) => {
                const item = document.createElement("div");
                item.className = "autocomplete-item";
                item.textContent = suggestion.term;
                item.addEventListener("click", () => {
                    input.value = suggestion.term;
                    dropdown.style.display = "none";
                    selectedTerm.textContent = suggestion.term; // Update the selected term
                    displayData(suggestion);
                });
                dropdown.appendChild(item);
            });

            dropdown.style.display = "block";
            selectedIndex = -1;
        }


        function displayData(data) {
            selectedTerm.textContent = data.term; // Update the selected term
            dataContent.textContent = data.definition;
            lifespan.textContent = data.lifespan;
            habitat.textContent = data.habitat;
            classification.textContent = data.classification;

            // Define an array of field IDs
            const fieldIds = ["lifespan", "habitat", "classification"];

            // Iterate through the field IDs
            fieldIds.forEach(fieldId => {
                const fieldElement = document.getElementById(fieldId);
                // Check if the field exists in the data and if it's not the 'definition' field
                if (data[fieldId] && fieldId !== "definition") {
                    fieldElement.textContent = `${fieldId.charAt(0).toUpperCase() + fieldId.slice(1)}: ${data[fieldId]}`;
                    fieldElement.style.display = "block"; // Show the field
                } else {
                    fieldElement.style.display = "none"; // Hide the field if it doesn't exist or if it's the 'definition' field
                }
            });

            dataDisplay.style.display = "block"; // Show the dataDisplay section
        }


        document.addEventListener("click", (e) => {
            if (!e.target.matches("#searchInput")) {
                dropdown.style.display = "none";
            }
        });
    </script>
</body>
</html>
