<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Volunteers Dashboard</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"/>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet"/>
<style>
body { background: #f0f2f5; font-size: 0.95rem; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;  margin-top: 72px;}
.navbar-custom { background-color:#4e81c2; color:white; }
.navbar-custom .navbar-brand { font-weight:bold; color:#f8f9fa; }

#loadingMessage { text-align:center; padding:2rem; color:#666; font-size:1.1rem;}

.metric-container {
  display: grid;
  gap: 1rem;
  grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
}

.metric-card {
  display: flex; flex-direction: column; justify-content: center; align-items: center;
  font-size: 1.05rem; text-align: center;
  border-radius: .75rem; background:white; padding:1rem;
}
.metric-card div.metric-number { font-weight: 700; font-size: 1.3rem; margin-top:0.25rem; }

.table-wrapper { margin-top: 1rem; margin-bottom: 1.5rem; }
.table thead { background: #e9ecef; }
.card-header { color:white; font-weight:600; font-size:1rem; }

.header-volunteers { background-color:#1cc88a; }
.header-bookings { background-color:#36b9cc; }
.header-recent { background-color:#4e73df; }

.badge { font-size:0.85rem; }
.bg-pending { background-color:#ff7f50 !important; color:white !important; }
.highlight-today { background-color: #e2f7e1 !important; }

.form-label.left { text-align:left; display:block; }
.form-label.right { text-align:right; display:block; }
#exportSnapshotBtn { display:block; margin:1rem auto; }
</style>
</head>
<body>

<!--<nav class="navbar navbar-expand-lg navbar-custom sticky-top mb-4">-->
<!--  <div class="container">-->
<!--    <a class="navbar-brand" href="#">Volunteers Dashboard</a>-->
<!--  </div>-->
<!--</nav>-->

<div id="navbar"></div>


<div class="container my-3">

<!-- Filters -->
<div class="row g-3 mb-4 align-items-end">
  <div class="col-lg-2 col-md-3 col-6">
    <label class="form-label left">Start Date</label>
    <input type="date" id="startDate" class="form-control">
  </div>
<!--  <div class="col-lg-2 col-md-3 col-6">-->
  <div class="col-lg-2 col-md-3 col-6 ms-auto text-end">
    <label class="form-label right">End Date</label>
    <input type="date" id="endDate" class="form-control">
  </div>
  <div class="col-12">
    <button class="btn btn-primary" id="exportSnapshotBtn"><i class="fa-solid fa-file-pdf"></i> Export </button>
  </div>
</div>

<!-- Overview Metrics -->
<div class="metric-container">
  <div class="metric-card text-success">
    <div class="metric-icon"><i class="fa-solid fa-user-check"></i></div>
    Volunteers Today
    <div class="metric-number" id="volunteersTodayCount">0</div>
  </div>
  <div class="metric-card">
    <div class="metric-icon"><i class="fa-solid fa-clock"></i></div>
    Pending Approvals
    <div class="metric-number" id="pendingApprovalsCount">0</div>
  </div>
  <div class="metric-card text-primary">
    <div class="metric-icon"><i class="fa-solid fa-calendar-check"></i></div>
    Total Bookings
    <div class="metric-number" id="totalBookingsCount">0</div>
  </div>
  <div class="metric-card text-info">
    <div class="metric-icon"><i class="fa-solid fa-hourglass-half"></i></div>
    This Week
    <div class="metric-number" id="upcomingWeekCount">0</div>
  </div>
</div>

<!-- Volunteers Today Table -->
<div class="table-wrapper">
  <div class="card shadow-sm">
    <div class="card-header header-volunteers">Volunteers Today</div>
    <div class="table-responsive">
      <table class="table table-striped align-middle mb-0">
        <thead class="table-light">
          <tr><th>Name</th><th>Start</th><th>End</th><th>Type</th></tr>
        </thead>
        <tbody id="volunteersTodayBody"><tr><td colspan="4" class="text-center text-muted">Loading...</td></tr></tbody>
      </table>
    </div>
  </div>
</div>

<!-- Total Bookings Table -->
<div class="table-wrapper">
  <div class="card shadow-sm">
    <div class="card-header header-bookings">Bookings in Selected Period</div>
    <div class="table-responsive">
      <table class="table table-striped align-middle mb-0">
        <thead class="table-light">
          <tr><th>Date</th><th>Name</th><th>Start</th><th>End</th><th>Type</th></tr>
        </thead>
        <tbody id="totalBookingsBody"><tr><td colspan="5" class="text-center text-muted">Loading...</td></tr></tbody>
      </table>
    </div>
  </div>
</div>

<!-- Recent Bookings -->
<div class="table-wrapper">
  <div class="card shadow-sm">
    <div class="card-header header-recent">Recent Bookings (Last 5)</div>
    <div class="table-responsive">
      <table class="table table-striped align-middle mb-0">
        <thead class="table-light">
          <tr><th>Date</th><th>Name</th><th>Type</th><th>Approved</th></tr>
        </thead>
        <tbody id="recentBookingsBody"><tr><td colspan="4" class="text-center text-muted">Loading...</td></tr></tbody>
      </table>
    </div>
  </div>
</div>

<div id="loadingMessage">Loading data, please wait...</div>
</div>

<!-- Scripts -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<script src="js/loadNavbar.js"></script>
<script src="js/overview.js"></script>
<script>
  loadNavbar();
</script>
</body>
</html>

<!--mismatch counts before 2AM-->
